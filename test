document.addEventListener("DOMContentLoaded", function () {
    const cart = [];
  
    const productLists = document.querySelectorAll("#products-main");
    const productDiscountLists = document.querySelectorAll("#products-discount");
  
    if (!productLists || productLists.length === 0) {
      console.error("Error: No .cards elements found within .products!");
      return;
    }
  
    fetch("products.json")
      .then((response) => response.json())
      .then((products) => {
        productLists.forEach((productList) => {
          const cards = productList.querySelectorAll(".card"); // Get the existing cards
  
          if (products.length !== cards.length) {
            console.warn(
              "Number of products and cards do not match. Some cards may not be populated."
            );
          }
  
          products.forEach((product, index) => {
            if (cards[index]) {
              // Check if a card exists for this index
              cards[
                index
              ].innerHTML = `  <div class="favorite-btn"> <img src="./assets/icons/Favorite_duotone.svg" alt="Favorite_duotone" /> </div>
                          <div class="iphone"> <img src="${product.image}" alt="${product.name}" /> </div>
                          <div class="info-buy">
                              <div class="info">
                                  <p>${product.name}</p>
                                  <p class="price">$${product.price}</p>
                              </div>
                              <div class="buy-now">
                                  <button>Buy Now</button>
                              </div>
                          </div>`;
            }
          });
        });
      })
      .catch((error) => {
        console.error("Error loading products:", error);
      });
  
    fetch("products-discount.json")
      .then((response) => response.json())
      .then((products) => {
        productDiscountLists.forEach((productList) => {
          const cards = productList.querySelectorAll(".card"); // Get the existing cards
  
          if (products.length !== cards.length) {
            console.warn(
              "Number of products and cards do not match. Some cards may not be populated."
            );
          }
  
          products.forEach((product, index) => {
            if (cards[index]) {
              // Check if a card exists for this index
              cards[
                index
              ].innerHTML = `  <div class="favorite-btn"> <img src="./assets/icons/Favorite_duotone.svg" alt="Favorite_duotone" /> </div>
                          <div class="iphone"> <img src="${product.image}" alt="${product.name}" /> </div>
                          <div class="info-buy">
                              <div class="info">
                                  <p>${product.name}</p>
                                  <p class="price">$${product.price}</p>
                              </div>
                              <div class="buy-now">
                                  <button>Buy Now</button>
                              </div>
                          </div>`;
            }
          });
        });
      })
      .catch((error) => {
        console.error("Error loading products:", error);
      });
  });
  